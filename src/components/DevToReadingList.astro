---
import { getCollection } from "astro:content";
import { Section } from "./Section";
import Lede from "./Lede.astro";
import { StyledTextLink } from "./StyledTextLink";
import PaginatedGrid from "./PaginatedGrid.astro";
import ReadingListCard from "./items/ReadingListCard.astro";

const searchParam = "readingList";
const anchor = "reading";
const itemsPerPage = 9;

const collection = await getCollection("dev-to-reading-list");

const items = collection.map((entry) => entry.data.article);
---

<Section heading="Reading">
  <Lede>
    <p class="max-w-3xl font-serif leading-relaxed tracking-widest mt-3">
      Articles I've saved to my <StyledTextLink
        href="https://dev.to/philw_/readinglist"
        class="underline">DEV.to reading list</StyledTextLink
      > that I've found useful, interesting, or want to read later.
    </p>
  </Lede>
  <div class="mt-8">
    <PaginatedGrid
      items={items}
      itemsPerPage={itemsPerPage}
      searchParam={searchParam}
      anchor={anchor}
      itemComponent={ReadingListCard}
    >
      <p slot="empty" class="text-center text-gray-500 py-8">
        No reading list items found. Make sure you have set up your DEV.to API
        key and have items in your reading list.
      </p>
    </PaginatedGrid>
  </div>
</Section>
